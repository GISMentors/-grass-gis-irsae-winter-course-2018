Unit 09 - Model tuning
======================

.. warning:: Materials under construction!


Let's improve our NDVI model created in :doc:`08`. The model operates
in a current computation region, it would be better to define region
based on user input, eg. by city area. Then NDVI would be computed
only within user defined area.

NDVI values range from +1.0 to -1.0. Areas of barren rock, sand, or
snow usually show very low NDVI values (for example, 0.1 or
less). Sparse vegetation such as shrubs and grasslands or senescing
crops may result in moderate NDVI values (approximately 0.2 to
0.5). High NDVI values (approximately 0.6 to 0.9) correspond to dense
vegetation such as that found in temperate and tropical forests or
crops at their peak growth stage. Let's classify NDVI into 3 major
classes:

* Class 1: from -1.0 to 0.2
* Class 2: from 0.2 to 0.6
* Class 3: from 0.6 to 1.0

The desired output will be vector map with NDVI classes. Let's also
eliminate too small areas.

From GRASS perspective computation will be performed by several steps/modules:

#. Erase cloud mask from input city region (:grasscmd:`v.overlay`: ``not`` operator)
#. Set computation region based on modified input city region (:grasscmd:`g.region`)
#. Set mask (:grasscmd:`r.mask`)
#. Compute NDVI values (:grasscmd:`i.vi`)
#. Reclassify NDVI values into classes (:grasscmd:`r.recode`)
#. Set nice color table for raster map classes (:grasscmd:`r.colors`)
#. Convert raster classes into vector areas (:grasscmd:`r.to.vect`)
#. Remove small areas (join them with adjacent areas by :grasscmd:`v.clean`)

New modules can be added to the existing model in standard way by
|grass-module-add| :sup:`Add command (GRASS module) to the model`. New
commands are added to the end of a computation workflow which is not
desired in this case. Good news: we can reorder commands (items) in
:item:`Items` tab.
